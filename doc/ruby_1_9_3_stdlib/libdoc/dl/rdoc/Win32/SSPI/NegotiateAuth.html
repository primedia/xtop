<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- classpage -- >
    <!-- RD version: 0.26.0  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  
  <meta content="2014-04-26 10:50:05 -0700" http-equiv="change-date" />
  <!-- rel_prefix  = '../..'  ENV['RDOC_FOR_WEBSITE']   = false-->
    
  <!-- rel_prefix = '../..'   asset_rel_prefix = '../..'  --> 
  <title>Class: Win32::SSPI::NegotiateAuth (Ruby 1.9.3) </title>
  <!-- link rel="stylesheet" href="../..css/obf.css"  -->
  <link rel="stylesheet" href="../../css/inuit.css" >
  <link rel="stylesheet" href="../../css/grid.inuit.css" >
  <link rel="stylesheet" href="../../css/2011.css" type="text/css" >
  <link rel="stylesheet" href="../../css/rdoc.css" type="text/css" >

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="../../js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 

  <style type='text/css'>

    #vulns-alert #vulns{
      background-color: #c33 ! important;
      width: 100%;
      text-align: center;
   }
   
   #vulns-alert #vulns a {
    color: #F99 ! important;
   }
 </style>

</head>

<body id="top" class="class rdocstar">
<div id='actionbar' >
<div class='wrapper'>
  <ul class='grids g0'></ul>
</div>
<span id='vulns-alert'></span>
</div> <!-- end action bar -->
 <div class='wrapper'>
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
          
          
          <!-- br><a id='alternateFormatLink' class='rotate' href="#" onclick='matchingYardUrl()'>YARD version</a -->
          
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul id='file-metadata'>

          
          
          
          <li class='in-file'>dl/win32/lib/win32/sspi.rb</li>      
            
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="../../Object.html">Object</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-c-proxy_auth_get">::proxy_auth_get</a></li>
          
          <li><a href="#method-i-complete_authentication">#complete_authentication</a></li>
          
          <li><a href="#method-i-get_initial_token">#get_initial_token</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
          
          
          
          <li><a href="../../DL.html">DL</a></li>
        
          
          
          <li><a href="../../DL/BasicTypes.html">DL::BasicTypes</a></li>
        
          
          
          <li><a href="../../DL/CFunc.html">DL::CFunc</a></li>
        
          
          
          <li><a href="../../DL/CParser.html">DL::CParser</a></li>
        
          
          
          <li><a href="../../DL/CPtr.html">DL::CPtr</a></li>
        
          
          
          <li><a href="../../DL/CStruct.html">DL::CStruct</a></li>
        
          
          
          <li><a href="../../DL/CStructBuilder.html">DL::CStructBuilder</a></li>
        
          
          
          <li><a href="../../DL/CStructEntity.html">DL::CStructEntity</a></li>
        
          
          
          <li><a href="../../DL/CUnion.html">DL::CUnion</a></li>
        
          
          
          <li><a href="../../DL/CUnionEntity.html">DL::CUnionEntity</a></li>
        
          
          
          <li><a href="../../DL/CarriedFunction.html">DL::CarriedFunction</a></li>
        
          
          
          <li><a href="../../DL/CompositeHandler.html">DL::CompositeHandler</a></li>
        
          
          
          <li><a href="../../DL/DLError.html">DL::DLError</a></li>
        
          
          
          <li><a href="../../DL/DLTypeError.html">DL::DLTypeError</a></li>
        
          
          
          <li><a href="../../DL/Function.html">DL::Function</a></li>
        
          
          
          <li><a href="../../DL/Handle.html">DL::Handle</a></li>
        
          
          
          <li><a href="../../DL/Importer.html">DL::Importer</a></li>
        
          
          
          <li><a href="../../DL/Packer.html">DL::Packer</a></li>
        
          
          
          <li><a href="../../DL/Stack.html">DL::Stack</a></li>
        
          
          
          <li><a href="../../DL/TempFunction.html">DL::TempFunction</a></li>
        
          
          
          <li><a href="../../DL/ValueUtil.html">DL::ValueUtil</a></li>
        
          
          
          <li><a href="../../DL/Win32Types.html">DL::Win32Types</a></li>
        
          
          
          <li><a href="../../Object.html">Object</a></li>
        
          
          
          <li><a href="../../Win32.html">Win32</a></li>
        
          
          
          <li><a href="../../Win32/Registry.html">Win32::Registry</a></li>
        
          
          
          <li><a href="../../Win32/Registry/API.html">Win32::Registry::API</a></li>
        
          
          
          <li><a href="../../Win32/Registry/Constants.html">Win32::Registry::Constants</a></li>
        
          
          
          <li><a href="../../Win32/Registry/Error.html">Win32::Registry::Error</a></li>
        
          
          
          <li><a href="../../Win32/Registry/Error/Kernel32.html">Win32::Registry::Error::Kernel32</a></li>
        
          
          
          <li><a href="../../Win32/Registry/PredefinedKey.html">Win32::Registry::PredefinedKey</a></li>
        
          
          
          <li><a href="../../Win32/Resolv.html">Win32::Resolv</a></li>
        
          
          
          <li><a href="../../Win32/Resolv/Kernel32.html">Win32::Resolv::Kernel32</a></li>
        
          
          
          <li><a href="../../Win32/SSPI/API.html">Win32::SSPI::API</a></li>
        
          
          
          <li><a href="../../Win32/SSPI/Identity.html">Win32::SSPI::Identity</a></li>
        
          
          
          <li><a href="../../Win32/SSPI/NegotiateAuth.html">Win32::SSPI::NegotiateAuth</a></li>
        
          
          
          <li><a href="../../Win32/SSPI/SSPIResult.html">Win32::SSPI::SSPIResult</a></li>
        
          
          
          <li><a href="../../Win32/SSPI/SecurityBuffer.html">Win32::SSPI::SecurityBuffer</a></li>
        
          
          
          <li><a href="../../Win32/SSPI/SecurityHandle.html">Win32::SSPI::SecurityHandle</a></li>
        
          
          
          <li><a href="../../Win32/SSPI/TimeStamp.html">Win32::SSPI::TimeStamp</a></li>
        
          
          
          <li><a href="../../Win32API.html">Win32API</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div> <!-- metadata -->
  <div class='adzbox'  id="azk83167">
    
  </div> 
  <div id="documentation">
    <h1 class="class">Win32::SSPI::NegotiateAuth</h1>

    <div id="description" class="description">
      
<p>Handles “Negotiate” type authentication. Geared towards authenticating with
a proxy server over HTTP</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="B64_TOKEN_PREFIX">B64_TOKEN_PREFIX</a></dt>
          
          <dd class="description"><p>NTLM tokens start with this header always. Encoding alone adds “==” and
newline, so remove those</p></dd>
          
        
          <dt><a name="REQUEST_FLAGS">REQUEST_FLAGS</a></dt>
          
          <dd class="description"><p>Default request flags for SSPI functions</p></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="context-attribute-method" class="method-detail">
          <a name="context"></a>
          
          <a name="context="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">context</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description 245">
          
          
          
          </div>
        </div>
        
        <div id="contextAttributes-attribute-method" class="method-detail">
          <a name="contextAttributes"></a>
          
          <a name="contextAttributes="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">contextAttributes</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description 245">
          
          
          
          </div>
        </div>
        
        <div id="credentials-attribute-method" class="method-detail">
          <a name="credentials"></a>
          
          <a name="credentials="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">credentials</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description 245">
          
          
          
          </div>
        </div>
        
        <div id="domain-attribute-method" class="method-detail">
          <a name="domain"></a>
          
          <a name="domain="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">domain</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description 245">
          
          
          
          </div>
        </div>
        
        <div id="user-attribute-method" class="method-detail">
          <a name="user"></a>
          
          <a name="user="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">user</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description 245">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(user = nil, domain = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates a new instance ready for authentication as the given user in the
given domain. Defaults to current user and domain as defined by <a
href=""USERDOMAIN"">ENV</a> and <a href=""USERNAME"">ENV</a> if no
arguments are supplied.</p>
            

            
            <div class="method-source-code" id="new-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">user</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">domain</span> = <span class="ruby-keyword">nil</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERNAME&quot;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERDOMAIN&quot;</span>].<span class="ruby-identifier">nil?</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;A username or domain must be supplied since they cannot be retrieved from the environment&quot;</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERNAME&quot;</span>]
        <span class="ruby-ivar">@domain</span> = <span class="ruby-identifier">domain</span> <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;USERDOMAIN&quot;</span>]
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->
      
        <div id="proxy_auth_get-method" class="method-detail ">
          <a name="method-c-proxy_auth_get"></a>

          
          <div class="method-heading">
            <span class="method-name">proxy_auth_get</span><span
              class="method-args">(http, path, user = nil, domain = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Given a connection and a request path, performs authentication as the
current user and returns the response from a GET request. The connnection
should be a Net::HTTP object, and it should have been constructed using the
Net::HTTP.Proxy method, but anything that responds to “get” will work. If a
user and domain are given, will authenticate as the given user. Returns the
response received from the get method (usually Net::HTTPResponse)</p>
            

            
            <div class="method-source-code" id="proxy_auth_get-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">NegotiateAuth</span>.<span class="ruby-identifier">proxy_auth_get</span>(<span class="ruby-identifier">http</span>, <span class="ruby-identifier">path</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">domain</span> = <span class="ruby-keyword">nil</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;http must respond to :get&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">http</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:get</span>)
        <span class="ruby-identifier">nego_auth</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">user</span>, <span class="ruby-identifier">domain</span>

        <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">http</span>.<span class="ruby-identifier">get</span> <span class="ruby-identifier">path</span>, { <span class="ruby-string">&quot;Proxy-Authorization&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Negotiate &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">nego_auth</span>.<span class="ruby-identifier">get_initial_token</span> }
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-string">&quot;Proxy-Authenticate&quot;</span>]
                <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">http</span>.<span class="ruby-identifier">get</span> <span class="ruby-identifier">path</span>, { <span class="ruby-string">&quot;Proxy-Authorization&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Negotiate &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">nego_auth</span>.<span class="ruby-identifier">complete_authentication</span>(<span class="ruby-identifier">resp</span>[<span class="ruby-string">&quot;Proxy-Authenticate&quot;</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>).<span class="ruby-identifier">last</span>.<span class="ruby-identifier">strip</span>) }
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">resp</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- proxy_auth_get-source -->
            
          </div>

          

          
        </div><!-- proxy_auth_get-method -->
      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="complete_authentication-method" class="method-detail ">
          <a name="method-i-complete_authentication"></a>

          
          <div class="method-heading">
            <span class="method-name">complete_authentication</span><span
              class="method-args">(token)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Takes a token and gets the next token in the Negotiate authentication
chain. Token can be Base64 encoded or not. The token can include the
“Negotiate” header and it will be stripped. Does not indicate if
SEC_I_CONTINUE or SEC_E_OK was returned. Token returned is Base64 encoded
w/ all new lines removed.</p>
            

            
            <div class="method-source-code" id="complete_authentication-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 270</span>
              <span class="ruby-keyword">def</span> <span class="ruby-identifier">complete_authentication</span>(<span class="ruby-identifier">token</span>)
                      <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;This object is no longer usable because its resources have been freed.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@cleaned_up</span>

                      <span class="ruby-comment"># Nil token OK, just set it to empty string</span>
                      <span class="ruby-identifier">token</span> = <span class="ruby-string">&quot;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">nil?</span>

                      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;Negotiate&quot;</span>
                              <span class="ruby-comment"># If the Negotiate prefix is passed in, assume we are seeing &quot;Negotiate &lt;token&gt;&quot; and get the token.</span>
                              <span class="ruby-identifier">token</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot; &quot;</span>).<span class="ruby-identifier">last</span>
                      <span class="ruby-keyword">end</span>

                      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">include?</span> <span class="ruby-constant">B64_TOKEN_PREFIX</span>
                              <span class="ruby-comment"># indicates base64 encoded token</span>
<span class="ruby-identifier">token</span> = <span class="ruby-identifier">token</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;m&quot;</span>)[<span class="ruby-value">0</span>]
                      <span class="ruby-keyword">end</span>

                      <span class="ruby-identifier">outputBuffer</span> = <span class="ruby-constant">SecurityBuffer</span>.<span class="ruby-identifier">new</span>
                      <span class="ruby-identifier">result</span> = <span class="ruby-constant">SSPIResult</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">API</span><span class="ruby-operator">::</span><span class="ruby-constant">InitializeSecurityContext</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@credentials</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-ivar">@context</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-keyword">nil</span>,
                              <span class="ruby-constant">REQUEST_FLAGS</span>, <span class="ruby-value">0</span>, <span class="ruby-constant">SECURITY_NETWORK_DREP</span>, <span class="ruby-constant">SecurityBuffer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">token</span>).<span class="ruby-identifier">to_p</span>, <span class="ruby-value">0</span>,
                              <span class="ruby-ivar">@context</span>.<span class="ruby-identifier">to_p</span>,
                              <span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-ivar">@contextAttributes</span>, <span class="ruby-constant">TimeStamp</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_p</span>))

                      <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">ok?</span> <span class="ruby-keyword">then</span>
                              <span class="ruby-keyword">return</span> <span class="ruby-identifier">encode_token</span>(<span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">token</span>)
                      <span class="ruby-keyword">else</span>
                              <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Error: #{result.to_s}&quot;</span>
                      <span class="ruby-keyword">end</span>
              <span class="ruby-keyword">ensure</span>
                      <span class="ruby-comment"># need to make sure we don't clean up if we've already cleaned up.</span>
                      <span class="ruby-identifier">clean_up</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@cleaned_up</span>
              <span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- complete_authentication-source -->
            
          </div>

          

          
        </div><!-- complete_authentication-method -->
      
        <div id="get_initial_token-method" class="method-detail ">
          <a name="method-i-get_initial_token"></a>

          
          <div class="method-heading">
            <span class="method-name">get_initial_token</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Gets the initial Negotiate token. Returns it as a base64 encoded string
suitable for use in HTTP. Can be easily decoded, however.</p>
            

            
            <div class="method-source-code" id="get_initial_token-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File dl/win32/lib/win32/sspi.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_initial_token</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;This object is no longer usable because its resources have been freed.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@cleaned_up</span>
        <span class="ruby-identifier">get_credentials</span>

        <span class="ruby-identifier">outputBuffer</span> = <span class="ruby-constant">SecurityBuffer</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-ivar">@context</span> = <span class="ruby-constant">CtxtHandle</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-ivar">@contextAttributes</span> = <span class="ruby-string">&quot;\0&quot;</span> <span class="ruby-operator">*</span> <span class="ruby-value">4</span>

        <span class="ruby-identifier">result</span> = <span class="ruby-constant">SSPIResult</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">API</span><span class="ruby-operator">::</span><span class="ruby-constant">InitializeSecurityContext</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@credentials</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>,
                <span class="ruby-constant">REQUEST_FLAGS</span>,<span class="ruby-value">0</span>, <span class="ruby-constant">SECURITY_NETWORK_DREP</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-value">0</span>, <span class="ruby-ivar">@context</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">to_p</span>, <span class="ruby-ivar">@contextAttributes</span>, <span class="ruby-constant">TimeStamp</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_p</span>))

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">ok?</span> <span class="ruby-keyword">then</span>
                <span class="ruby-keyword">return</span> <span class="ruby-identifier">encode_token</span>(<span class="ruby-identifier">outputBuffer</span>.<span class="ruby-identifier">token</span>)
        <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Error: #{result.to_s}&quot;</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- get_initial_token-source -->
            
          </div>

          

          
        </div><!-- get_initial_token-method -->
      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  
  <div id='tx_NegotiateAuth_versioned' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_NegotiateAuth_versioned").load("/associated/1.9.3/NegotiateAuth.html");</script> <div id='tx_NegotiateAuth' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_NegotiateAuth").load("/associated/NegotiateAuth.html");</script> 
      
  </div><!-- documentation -->
  <div id='dynamic'>
  </div>
      
<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 1.9.3</small></p> 
  
   <p><a href="http://www.ruby-doc.org">Ruby-doc.org</a> is a service of <a href="http://www.jamesbritt.com">James Britt</a> and <a href="http://www.neurogami.com">Neurogami</a>, an <a href="http://www.neurogami.com">application development company in Scottsdale, AZ</a>.</p>
 
    <p><small>Generated with Ruby-doc Rdoc Generator 0.26.0</small>.</p>
  </div>
</div>
  
 <script type='text/javascript'>
$(document).ready(function() {
      $.ajaxSetup({ cache: false });
      $("#vulns-alert").load("/associated/vulns.html");
    });

    </script>


 
    <script type='text/javascript'>

  function loadPlus(plusdocs){
    var img_h = $("img.carbonad-image").css('height');
    //if(img_h != undefined) { //---
      $(plusdocs).find("div[class='associated_wrapper']").each (function() {
          $("#" + this.id).append($(plusdocs).find("#" + this.id ));
          });
    //} // ---
  } // end loadPlusdocs


$(document).ready(function() {
    $.ajaxSetup({ cache: false });
      $.get('/associated/1.9.3/plus_NegotiateAuth.html', 
      function(plusdocs) {
      setTimeout(function() {
        loadPlus(plusdocs);
        }, 2000);
      }
      );
    });
</script>
		
</body>
</html>


