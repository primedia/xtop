<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- classpage -- >
    <!-- RD version: 0.26.0  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  
  <meta content="2014-04-26 10:51:00 -0700" http-equiv="change-date" />
  <!-- rel_prefix  = ''  ENV['RDOC_FOR_WEBSITE']   = false-->
    
    
    
  <!-- rel_prefix = '.'   asset_rel_prefix = ''  --> 
  <title>Module: MonitorMixin (Ruby 1.9.3) </title>
  <!-- link rel="stylesheet" href=".css/obf.css"  -->
  <link rel="stylesheet" href="css/inuit.css" >
  <link rel="stylesheet" href="css/grid.inuit.css" >
  <link rel="stylesheet" href="css/2011.css" type="text/css" >
  <link rel="stylesheet" href="css/rdoc.css" type="text/css" >

  <script src="/js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="/js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="/js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 

  <style type='text/css'>

    #vulns-alert #vulns{
      background-color: #c33 ! important;
      width: 100%;
      text-align: center;
   }
   
   #vulns-alert #vulns a {
    color: #F99 ! important;
   }
 </style>

</head>

<body id="top" class="module rdocstar">
<div id='actionbar' >
<div class='wrapper'>
  <ul class='grids g0'></ul>
</div>
<span id='vulns-alert'></span>
</div> <!-- end action bar -->
 <div class='wrapper'>
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
          
          
          <!-- br><a id='alternateFormatLink' class='rotate' href="#" onclick='matchingYardUrl()'>YARD version</a -->
          
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul id='file-metadata'>

          
          
          
          <li class='in-file'>monitor.rb</li>      
            
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="MonitorMixin/ConditionVariable.html">MonitorMixin::ConditionVariable</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-extend_object">::extend_object</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-mon_enter">#mon_enter</a></li>
          
          <li><a href="#method-i-mon_exit">#mon_exit</a></li>
          
          <li><a href="#method-i-mon_synchronize">#mon_synchronize</a></li>
          
          <li><a href="#method-i-mon_try_enter">#mon_try_enter</a></li>
          
          <li><a href="#method-i-new_cond">#new_cond</a></li>
          
          <li><a href="#method-i-synchronize">#synchronize</a></li>
          
          <li><a href="#method-i-try_mon_enter">#try_mon_enter</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
          
          
          
          <li><a href="./Monitor.html">Monitor</a></li>
        
          
          
          <li><a href="./MonitorMixin.html">MonitorMixin</a></li>
        
          
          
          <li><a href="./MonitorMixin/ConditionVariable.html">MonitorMixin::ConditionVariable</a></li>
        
          
          
          <li><a href="./MonitorMixin/ConditionVariable/Timeout.html">MonitorMixin::ConditionVariable::Timeout</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div> <!-- metadata -->
  <div class='adzbox'  id="azk83167">
    
  </div> 
  <div id="documentation">
    <h1 class="module">MonitorMixin</h1>

    <div id="description" class="description">
      
<p>In concurrent programming, a monitor is an object or module intended to be
used safely by more than one thread.  The defining characteristic of a
monitor is that its methods are executed with mutual exclusion.  That is,
at each point in time, at most one thread may be executing any of its
methods. This mutual exclusion greatly simplifies reasoning about the
implementation of monitors compared to reasoning about parallel code that
updates a data structure.</p>

<p>You can read more about the general principles on the Wikipedia page for <a
href="http://en.wikipedia.org/wiki/Monitor_%28synchronization%29">Monitors</a></p>

<h2 id="module-MonitorMixin-label-Examples">Examples<span><a href="#module-MonitorMixin-label-Examples">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<h3 id="module-MonitorMixin-label-Simple+object.extend">Simple object.extend<span><a href="#module-MonitorMixin-label-Simple+object.extend">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'monitor.rb'</span>

<span class="ruby-identifier">buf</span> = []
<span class="ruby-identifier">buf</span>.<span class="ruby-identifier">extend</span>(<span class="ruby-constant">MonitorMixin</span>)
<span class="ruby-identifier">empty_cond</span> = <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">new_cond</span>

<span class="ruby-comment"># consumer</span>
<span class="ruby-constant">Thread</span>.<span class="ruby-identifier">start</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">empty_cond</span>.<span class="ruby-identifier">wait_while</span> { <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">empty?</span> }
      <span class="ruby-identifier">print</span> <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># producer</span>
<span class="ruby-keyword">while</span> <span class="ruby-identifier">line</span> = <span class="ruby-constant">ARGF</span>.<span class="ruby-identifier">gets</span>
  <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">line</span>)
    <span class="ruby-identifier">empty_cond</span>.<span class="ruby-identifier">signal</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>The consumer thread waits for the producer thread to push a line to buf
while <code>buf.empty?</code>.  The producer thread (main thread) reads a
line from ARGF and pushes it into buf then calls
<code>empty_cond.signal</code> to notify the consumer thread of new data.</p>

<h3 id="module-MonitorMixin-label-Simple+Class+include">Simple Class include<span><a href="#module-MonitorMixin-label-Simple+Class+include">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'monitor'</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">SynchronizedArray</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Array</span>

  <span class="ruby-identifier">include</span> <span class="ruby-constant">MonitorMixin</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
    <span class="ruby-keyword">super</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">alias</span> :<span class="ruby-identifier">old_shift</span> <span class="ruby-operator">:</span><span class="ruby-identifier">shift</span>
  <span class="ruby-keyword">alias</span> :<span class="ruby-identifier">old_unshift</span> <span class="ruby-operator">:</span><span class="ruby-identifier">unshift</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">shift</span>(<span class="ruby-identifier">n</span>=<span class="ruby-value">1</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">old_shift</span>(<span class="ruby-identifier">n</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">item</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">synchronize</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">old_unshift</span>(<span class="ruby-identifier">item</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># other methods ...</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>SynchronizedArray</code> implements an Array with synchronized access
to items. This Class is implemented as subclass of Array which includes the
<a href="MonitorMixin.html">MonitorMixin</a> module.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="extend_object-method" class="method-detail ">
          <a name="method-c-extend_object"></a>

          
          <div class="method-heading">
            <span class="method-name">extend_object</span><span
              class="method-args">(obj)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="extend_object-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File monitor.rb, line 159</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">extend_object</span>(<span class="ruby-identifier">obj</span>)
  <span class="ruby-keyword">super</span>(<span class="ruby-identifier">obj</span>)
  <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-value">:mon_initialize</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- extend_object-source -->
            
          </div>

          

          
        </div><!-- extend_object-method -->
      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(*args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Use <code>extend MonitorMixin</code> or <code>include MonitorMixin</code>
instead of this constructor.  Have look at the examples above to understand
how to use this module.</p>
            

            
            <div class="method-source-code" id="new-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File monitor.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">mon_initialize</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->
      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="mon_enter-method" class="method-detail ">
          <a name="method-i-mon_enter"></a>

          
          <div class="method-heading">
            <span class="method-name">mon_enter</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Enters exclusive section.</p>
            

            
            <div class="method-source-code" id="mon_enter-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File monitor.rb, line 183</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mon_enter</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mon_owner</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>
    <span class="ruby-ivar">@mon_mutex</span>.<span class="ruby-identifier">lock</span>
    <span class="ruby-ivar">@mon_owner</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@mon_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- mon_enter-source -->
            
          </div>

          

          
        </div><!-- mon_enter-method -->
      
        <div id="mon_exit-method" class="method-detail ">
          <a name="method-i-mon_exit"></a>

          
          <div class="method-heading">
            <span class="method-name">mon_exit</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Leaves exclusive section.</p>
            

            
            <div class="method-source-code" id="mon_exit-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File monitor.rb, line 194</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mon_exit</span>
  <span class="ruby-identifier">mon_check_owner</span>
  <span class="ruby-ivar">@mon_count</span> <span class="ruby-operator">-=</span><span class="ruby-value">1</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mon_count</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
    <span class="ruby-ivar">@mon_owner</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@mon_mutex</span>.<span class="ruby-identifier">unlock</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- mon_exit-source -->
            
          </div>

          

          
        </div><!-- mon_exit-method -->
      
        <div id="mon_synchronize-method" class="method-detail ">
          <a name="method-i-mon_synchronize"></a>

          
          <div class="method-heading">
            <span class="method-name">mon_synchronize</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Enters exclusive section and executes the block.  Leaves the exclusive
section automatically when the block exits.  See example under
<code>MonitorMixin</code>.</p>
            

            
            <div class="method-source-code" id="mon_synchronize-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File monitor.rb, line 208</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mon_synchronize</span>
  <span class="ruby-identifier">mon_enter</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">mon_exit</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- mon_synchronize-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="MonitorMixin.html#method-i-synchronize">synchronize</a>
          </div>
          

          
        </div><!-- mon_synchronize-method -->
      
        <div id="mon_try_enter-method" class="method-detail ">
          <a name="method-i-mon_try_enter"></a>

          
          <div class="method-heading">
            <span class="method-name">mon_try_enter</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Attempts to enter exclusive section.  Returns <code>false</code> if lock
fails.</p>
            

            
            <div class="method-source-code" id="mon_try_enter-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File monitor.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">mon_try_enter</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mon_owner</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@mon_mutex</span>.<span class="ruby-identifier">try_lock</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@mon_owner</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@mon_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- mon_try_enter-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="MonitorMixin.html#method-i-try_mon_enter">try_mon_enter</a>
          </div>
          

          
        </div><!-- mon_try_enter-method -->
      
        <div id="new_cond-method" class="method-detail ">
          <a name="method-i-new_cond"></a>

          
          <div class="method-heading">
            <span class="method-name">new_cond</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Creates a new <a
href="MonitorMixin/ConditionVariable.html">MonitorMixin::ConditionVariable</a>
associated with the receiver.</p>
            

            
            <div class="method-source-code" id="new_cond-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File monitor.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">new_cond</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">ConditionVariable</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- new_cond-source -->
            
          </div>

          

          
        </div><!-- new_cond-method -->
      
        <div id="synchronize-method" class="method-detail method-alias">
          <a name="method-i-synchronize"></a>

          
          <div class="method-heading">
            <span class="method-name">synchronize</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="MonitorMixin.html#method-i-mon_synchronize">mon_synchronize</a>
          </div>
          
        </div><!-- synchronize-method -->
      
        <div id="try_mon_enter-method" class="method-detail method-alias">
          <a name="method-i-try_mon_enter"></a>

          
          <div class="method-heading">
            <span class="method-name">try_mon_enter</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>For backward compatibility</p>
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="MonitorMixin.html#method-i-mon_try_enter">mon_try_enter</a>
          </div>
          
        </div><!-- try_mon_enter-method -->
      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  
  <div id='tx_MonitorMixin_versioned' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_MonitorMixin_versioned").load("/associated/1.9.3/MonitorMixin.html");</script> <div id='tx_MonitorMixin' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_MonitorMixin").load("/associated/MonitorMixin.html");</script> 
      
  </div><!-- documentation -->
  <div id='dynamic'>
  </div>
      
<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 1.9.3</small></p> 
  
   <p><a href="http://www.ruby-doc.org">Ruby-doc.org</a> is a service of <a href="http://www.jamesbritt.com">James Britt</a> and <a href="http://www.neurogami.com">Neurogami</a>, a <a href="http://www.neurogami.com">software development company in Scottsdale, AZ</a>.</p>
 
    <p><small>Generated with Ruby-doc Rdoc Generator 0.26.0</small>.</p>
  </div>
</div>
  
 <script type='text/javascript'>
$(document).ready(function() {
      $.ajaxSetup({ cache: false });
      $("#vulns-alert").load("/associated/vulns.html");
    });

    </script>


 
    <script type='text/javascript'>

  function loadPlus(plusdocs){
    var img_h = $("img.carbonad-image").css('height');
    //if(img_h != undefined) { //---
      $(plusdocs).find("div[class='associated_wrapper']").each (function() {
          $("#" + this.id).append($(plusdocs).find("#" + this.id ));
          });
    //} // ---
  } // end loadPlusdocs


$(document).ready(function() {
    $.ajaxSetup({ cache: false });
      $.get('/associated/1.9.3/plus_MonitorMixin.html', 
      function(plusdocs) {
      setTimeout(function() {
        loadPlus(plusdocs);
        }, 2000);
      }
      );
    });
</script>
		
</body>
</html>


