<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- classpage -- >
    <!-- RD version: 0.26.0  -->
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  
  <meta content="2014-04-26 10:52:50 -0700" http-equiv="change-date" />
  <!-- rel_prefix  = '..'  ENV['RDOC_FOR_WEBSITE']   = false-->
    
  <!-- rel_prefix = '..'   asset_rel_prefix = '..'  --> 
  <title>Class: REXML::Text (Ruby 1.9.3) </title>
  <!-- link rel="stylesheet" href="..css/obf.css"  -->
  <link rel="stylesheet" href="../css/inuit.css" >
  <link rel="stylesheet" href="../css/grid.inuit.css" >
  <link rel="stylesheet" href="../css/2011.css" type="text/css" >
  <link rel="stylesheet" href="../css/rdoc.css" type="text/css" >

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/rubydoc.js" type="text/javascript" charset="utf-8"></script> 

 
<script src="../js/highlight.min.js"></script>
<script> 
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
  </script> 

  <style type='text/css'>

    #vulns-alert #vulns{
      background-color: #c33 ! important;
      width: 100%;
      text-align: center;
   }
   
   #vulns-alert #vulns a {
    color: #F99 ! important;
   }
 </style>

</head>

<body id="top" class="class rdocstar">
<div id='actionbar' >
<div class='wrapper'>
  <ul class='grids g0'></ul>
</div>
<span id='vulns-alert'></span>
</div> <!-- end action bar -->
 <div class='wrapper'>
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
          
          
          <!-- br><a id='alternateFormatLink' class='rotate' href="#" onclick='matchingYardUrl()'>YARD version</a -->
          
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul id='file-metadata'>

          
          
          
          <li class='in-file'>rexml/text.rb</li>      
            
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="Child.html">REXML::Child</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-check">::check</a></li>
          
          <li><a href="#method-c-expand">::expand</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-c-normalize">::normalize</a></li>
          
          <li><a href="#method-c-read_with_substitution">::read_with_substitution</a></li>
          
          <li><a href="#method-c-unnormalize">::unnormalize</a></li>
          
          <li><a href="#method-i-3C-3C">#<<</a></li>
          
          <li><a href="#method-i-3C-3D-3E">#<=></a></li>
          
          <li><a href="#method-i-clone">#clone</a></li>
          
          <li><a href="#method-i-doctype">#doctype</a></li>
          
          <li><a href="#method-i-empty-3F">#empty?</a></li>
          
          <li><a href="#method-i-indent_text">#indent_text</a></li>
          
          <li><a href="#method-i-inspect">#inspect</a></li>
          
          <li><a href="#method-i-node_type">#node_type</a></li>
          
          <li><a href="#method-i-parent-3D">#parent=</a></li>
          
          <li><a href="#method-i-to_s">#to_s</a></li>
          
          <li><a href="#method-i-value">#value</a></li>
          
          <li><a href="#method-i-value-3D">#value=</a></li>
          
          <li><a href="#method-i-wrap">#wrap</a></li>
          
          <li><a href="#method-i-write">#write</a></li>
          
          <li><a href="#method-i-write_with_substitution">#write_with_substitution</a></li>
          
          <li><a href="#method-i-xpath">#xpath</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><span class="include">Comparable</span></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
          
          
          
          <li><a href="../Array.html">Array</a></li>
        
          
          
          <li><a href="../Fixnum.html">Fixnum</a></li>
        
          
          
          <li><a href="../Float.html">Float</a></li>
        
          
          
          <li><a href="../Object.html">Object</a></li>
        
          
          
          <li><a href="../REXML.html">REXML</a></li>
        
          
          
          <li><a href="../REXML/AttlistDecl.html">REXML::AttlistDecl</a></li>
        
          
          
          <li><a href="../REXML/Attribute.html">REXML::Attribute</a></li>
        
          
          
          <li><a href="../REXML/Child.html">REXML::Child</a></li>
        
          
          
          <li><a href="../REXML/Comment.html">REXML::Comment</a></li>
        
          
          
          <li><a href="../REXML/DTD.html">REXML::DTD</a></li>
        
          
          
          <li><a href="../REXML/DTD/AttlistDecl.html">REXML::DTD::AttlistDecl</a></li>
        
          
          
          <li><a href="../REXML/DTD/ElementDecl.html">REXML::DTD::ElementDecl</a></li>
        
          
          
          <li><a href="../REXML/DTD/EntityDecl.html">REXML::DTD::EntityDecl</a></li>
        
          
          
          <li><a href="../REXML/DTD/NotationDecl.html">REXML::DTD::NotationDecl</a></li>
        
          
          
          <li><a href="../REXML/DTD/Parser.html">REXML::DTD::Parser</a></li>
        
          
          
          <li><a href="../REXML/DocType.html">REXML::DocType</a></li>
        
          
          
          <li><a href="../REXML/Document.html">REXML::Document</a></li>
        
          
          
          <li><a href="../REXML/Element.html">REXML::Element</a></li>
        
          
          
          <li><a href="../REXML/Entity.html">REXML::Entity</a></li>
        
          
          
          <li><a href="../REXML/EntityConst.html">REXML::EntityConst</a></li>
        
          
          
          <li><a href="../REXML/Formatters/Default.html">REXML::Formatters::Default</a></li>
        
          
          
          <li><a href="../REXML/Formatters/Pretty.html">REXML::Formatters::Pretty</a></li>
        
          
          
          <li><a href="../REXML/Formatters/Transitive.html">REXML::Formatters::Transitive</a></li>
        
          
          
          <li><a href="../REXML/Functions.html">REXML::Functions</a></li>
        
          
          
          <li><a href="../REXML/IOSource.html">REXML::IOSource</a></li>
        
          
          
          <li><a href="../REXML/Instruction.html">REXML::Instruction</a></li>
        
          
          
          <li><a href="../REXML/Light.html">REXML::Light</a></li>
        
          
          
          <li><a href="../REXML/Light/Node.html">REXML::Light::Node</a></li>
        
          
          
          <li><a href="../REXML/Namespace.html">REXML::Namespace</a></li>
        
          
          
          <li><a href="../REXML/Node.html">REXML::Node</a></li>
        
          
          
          <li><a href="../REXML/Output.html">REXML::Output</a></li>
        
          
          
          <li><a href="../REXML/Parent.html">REXML::Parent</a></li>
        
          
          
          <li><a href="../REXML/ParseException.html">REXML::ParseException</a></li>
        
          
          
          <li><a href="../REXML/Parsers/BaseParser.html">REXML::Parsers::BaseParser</a></li>
        
          
          
          <li><a href="../REXML/Parsers/LightParser.html">REXML::Parsers::LightParser</a></li>
        
          
          
          <li><a href="../REXML/Parsers/PullEvent.html">REXML::Parsers::PullEvent</a></li>
        
          
          
          <li><a href="../REXML/Parsers/PullParser.html">REXML::Parsers::PullParser</a></li>
        
          
          
          <li><a href="../REXML/Parsers/SAX2Parser.html">REXML::Parsers::SAX2Parser</a></li>
        
          
          
          <li><a href="../REXML/Parsers/StreamParser.html">REXML::Parsers::StreamParser</a></li>
        
          
          
          <li><a href="../REXML/Parsers/TreeParser.html">REXML::Parsers::TreeParser</a></li>
        
          
          
          <li><a href="../REXML/Parsers/UltraLightParser.html">REXML::Parsers::UltraLightParser</a></li>
        
          
          
          <li><a href="../REXML/Parsers/XPathParser.html">REXML::Parsers::XPathParser</a></li>
        
          
          
          <li><a href="../REXML/QuickPath.html">REXML::QuickPath</a></li>
        
          
          
          <li><a href="../REXML/SAX2Listener.html">REXML::SAX2Listener</a></li>
        
          
          
          <li><a href="../REXML/Source.html">REXML::Source</a></li>
        
          
          
          <li><a href="../REXML/SourceFactory.html">REXML::SourceFactory</a></li>
        
          
          
          <li><a href="../REXML/StreamListener.html">REXML::StreamListener</a></li>
        
          
          
          <li><a href="../REXML/SyncEnumerator.html">REXML::SyncEnumerator</a></li>
        
          
          
          <li><a href="../REXML/Text.html">REXML::Text</a></li>
        
          
          
          <li><a href="../REXML/UndefinedNamespaceException.html">REXML::UndefinedNamespaceException</a></li>
        
          
          
          <li><a href="../REXML/Validation.html">REXML::Validation</a></li>
        
          
          
          <li><a href="../REXML/Validation/Choice.html">REXML::Validation::Choice</a></li>
        
          
          
          <li><a href="../REXML/Validation/Event.html">REXML::Validation::Event</a></li>
        
          
          
          <li><a href="../REXML/Validation/Interleave.html">REXML::Validation::Interleave</a></li>
        
          
          
          <li><a href="../REXML/Validation/OneOrMore.html">REXML::Validation::OneOrMore</a></li>
        
          
          
          <li><a href="../REXML/Validation/Optional.html">REXML::Validation::Optional</a></li>
        
          
          
          <li><a href="../REXML/Validation/Ref.html">REXML::Validation::Ref</a></li>
        
          
          
          <li><a href="../REXML/Validation/RelaxNG.html">REXML::Validation::RelaxNG</a></li>
        
          
          
          <li><a href="../REXML/Validation/Sequence.html">REXML::Validation::Sequence</a></li>
        
          
          
          <li><a href="../REXML/Validation/State.html">REXML::Validation::State</a></li>
        
          
          
          <li><a href="../REXML/Validation/ValidationException.html">REXML::Validation::ValidationException</a></li>
        
          
          
          <li><a href="../REXML/Validation/Validator.html">REXML::Validation::Validator</a></li>
        
          
          
          <li><a href="../REXML/Validation/ZeroOrMore.html">REXML::Validation::ZeroOrMore</a></li>
        
          
          
          <li><a href="../REXML/XMLDecl.html">REXML::XMLDecl</a></li>
        
          
          
          <li><a href="../REXML/XMLTokens.html">REXML::XMLTokens</a></li>
        
          
          
          <li><a href="../REXML/XPath.html">REXML::XPath</a></li>
        
          
          
          <li><a href="../REXML/XPathParser.html">REXML::XPathParser</a></li>
        
          
          
          <li><a href="../Symbol.html">Symbol</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div> <!-- metadata -->
  <div class='adzbox'  id="azk83167">
    
  </div> 
  <div id="documentation">
    <h1 class="class">REXML::Text</h1>

    <div id="description" class="description">
      
<p>Represents text nodes in an XML document</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="EREFERENCE">EREFERENCE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="NEEDS_A_SECOND_CHECK">NEEDS_A_SECOND_CHECK</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="NUMERICENTITY">NUMERICENTITY</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="REFERENCE">REFERENCE</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="SETUTITSBUS">SETUTITSBUS</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="SLAICEPS">SLAICEPS</a></dt>
          
          <dd class="description"><p>Characters which are substituted in written strings</p></dd>
          
        
          <dt><a name="SPECIALS">SPECIALS</a></dt>
          
          <dd class="description"><p>The order in which the substitutions occur</p></dd>
          
        
          <dt><a name="SUBSTITUTES">SUBSTITUTES</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="VALID_CHAR">VALID_CHAR</a></dt>
          
          <dd class="description"></dd>
          
        
          <dt><a name="VALID_XML_CHARS">VALID_XML_CHARS</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="raw-attribute-method" class="method-detail">
          <a name="raw"></a>
          
          <a name="raw="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">raw</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description 245">
          
          <p>If <code>raw</code> is true, then <a href="../REXML.html">REXML</a> leaves
the value alone</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="check-method" class="method-detail ">
          <a name="method-c-check"></a>

          
          <div class="method-heading">
            <span class="method-name">check</span><span
              class="method-args">(string, pattern, doctype)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>check for illegal characters</p>
            

            
            <div class="method-source-code" id="check-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Text</span>.<span class="ruby-identifier">check</span> <span class="ruby-identifier">string</span>, <span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">doctype</span>

  <span class="ruby-comment"># illegal anywhere</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">string</span> <span class="ruby-operator">!~</span> <span class="ruby-constant">VALID_XML_CHARS</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">String</span>.<span class="ruby-identifier">method_defined?</span> <span class="ruby-value">:encode</span>
      <span class="ruby-identifier">string</span>.<span class="ruby-identifier">chars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">ord</span>
        <span class="ruby-keyword">when</span> <span class="ruby-operator">*</span><span class="ruby-constant">VALID_CHAR</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Illegal character #{c.inspect} in raw string \&quot;#{string}\&quot;&quot;</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">string</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/[\x00-\x7F]|[\x80-\xBF][\xC0-\xF0]*|[\xC0-\xF0]/n</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">'U'</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-operator">*</span><span class="ruby-constant">VALID_CHAR</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Illegal character #{c.inspect} in raw string \&quot;#{string}\&quot;&quot;</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># context sensitive</span>
  <span class="ruby-identifier">string</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-identifier">pattern</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-node">$1</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?;</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Illegal character '#{$1}' in raw string \&quot;#{string}\&quot;&quot;</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-node">$1</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?&amp;</span>
      <span class="ruby-keyword">if</span> <span class="ruby-node">$5</span> <span class="ruby-keyword">and</span> <span class="ruby-node">$5</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?#</span>
        <span class="ruby-keyword">case</span> (<span class="ruby-node">$5</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?x</span> <span class="ruby-operator">?</span> <span class="ruby-node">$5</span>[<span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>) <span class="ruby-operator">:</span> <span class="ruby-node">$5</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_i</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-operator">*</span><span class="ruby-constant">VALID_CHAR</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Illegal character '#{$1}' in raw string \&quot;#{string}\&quot;&quot;</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-comment"># FIXME: below can't work but this needs API change.</span>
      <span class="ruby-comment"># elsif @parent and $3 and !SUBSTITUTES.include?($1)</span>
      <span class="ruby-comment">#   if !doctype or !doctype.entities.has_key?($3)</span>
      <span class="ruby-comment">#     raise &quot;Undeclared entity '#{$1}' in raw string \&quot;#{string}\&quot;&quot;</span>
      <span class="ruby-comment">#   end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- check-source -->
            
          </div>

          

          
        </div><!-- check-method -->
      
        <div id="expand-method" class="method-detail ">
          <a name="method-c-expand"></a>

          
          <div class="method-heading">
            <span class="method-name">expand</span><span
              class="method-args">(ref, doctype, filter)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="expand-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 396</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Text</span>.<span class="ruby-identifier">expand</span>(<span class="ruby-identifier">ref</span>, <span class="ruby-identifier">doctype</span>, <span class="ruby-identifier">filter</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">ref</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?#</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ref</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?x</span>
      [<span class="ruby-identifier">ref</span>[<span class="ruby-value">3</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>)].<span class="ruby-identifier">pack</span>(<span class="ruby-string">'U*'</span>)
    <span class="ruby-keyword">else</span>
      [<span class="ruby-identifier">ref</span>[<span class="ruby-value">2</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_i</span>].<span class="ruby-identifier">pack</span>(<span class="ruby-string">'U*'</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">ref</span> <span class="ruby-operator">==</span> <span class="ruby-string">'&amp;amp;'</span>
    <span class="ruby-string">'&amp;'</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">filter</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">filter</span>.<span class="ruby-identifier">include?</span>( <span class="ruby-identifier">ref</span>[<span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>] )
    <span class="ruby-identifier">ref</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">doctype</span>
    <span class="ruby-identifier">doctype</span>.<span class="ruby-identifier">entity</span>( <span class="ruby-identifier">ref</span>[<span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>] ) <span class="ruby-keyword">or</span> <span class="ruby-identifier">ref</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">entity_value</span> = <span class="ruby-constant">DocType</span><span class="ruby-operator">::</span><span class="ruby-constant">DEFAULT_ENTITIES</span>[ <span class="ruby-identifier">ref</span>[<span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-value">-1</span>] ]
    <span class="ruby-identifier">entity_value</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">entity_value</span>.<span class="ruby-identifier">value</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">ref</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- expand-source -->
            
          </div>

          

          
        </div><!-- expand-method -->
      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(arg, respect_whitespace=false, parent=nil, raw=nil, entity_filter=nil, illegal=NEEDS_A_SECOND_CHECK )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Constructor <code>arg</code> if a String, the content is set to the String.
If a <a href="Text.html">Text</a>, the object is shallowly cloned.</p>

<p><code>respect_whitespace</code> (boolean, false) if true, whitespace is
respected</p>

<p><code>parent</code> (nil) if this is a <a href="Parent.html">Parent</a>
object, the parent will be set to this.</p>

<p><code>raw</code> (nil) This argument can be given three values. If true,
then the value of used to construct this object is expected to contain no
unescaped XML markup, and <a href="../REXML.html">REXML</a> will not change
the text. If this value is false, the string may contain any characters,
and <a href="../REXML.html">REXML</a> will escape any and all defined
entities whose values are contained in the text.  If this value is nil (the
default), then the raw value of the parent will be used as the raw value
for this node.  If there is no raw value for the parent, and no value is
supplied, the default is false. Use this field if you have entities defined
for some text, and you don't want <a href="../REXML.html">REXML</a> to
escape that text in output.</p>

<pre>Text.new( &quot;&lt;&amp;&quot;, false, nil, false ) #-&gt; &quot;&amp;lt;&amp;amp;&quot;
Text.new( &quot;&amp;lt;&amp;amp;&quot;, false, nil, false ) #-&gt; &quot;&amp;amp;lt;&amp;amp;amp;&quot;
Text.new( &quot;&lt;&amp;&quot;, false, nil, true )  #-&gt; Parse exception
Text.new( &quot;&amp;lt;&amp;amp;&quot;, false, nil, true )  #-&gt; &quot;&amp;lt;&amp;amp;&quot;
# Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;
# and that the entity    &quot;r&quot; is defined to be &quot;russell&quot;
Text.new( &quot;sean russell&quot; )          #-&gt; &quot;&amp;s; &amp;r;&quot;
Text.new( &quot;sean russell&quot;, false, nil, true ) #-&gt; &quot;sean russell&quot;</pre>

<p><code>entity_filter</code> (nil) This can be an array of entities to match
in the supplied text.  This argument is only useful if <code>raw</code> is
set to false.</p>

<pre>Text.new( &quot;sean russell&quot;, false, nil, false, [&quot;s&quot;] ) #-&gt; &quot;&amp;s; russell&quot;
Text.new( &quot;sean russell&quot;, false, nil, true, [&quot;s&quot;] ) #-&gt; &quot;sean russell&quot;</pre>

<p>In the last example, the <code>entity_filter</code> argument is ignored.</p>

<p><code>illegal</code> INTERNAL USE ONLY</p>
            

            
            <div class="method-source-code" id="new-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">arg</span>, <span class="ruby-identifier">respect_whitespace</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">parent</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">raw</span>=<span class="ruby-keyword">nil</span>,
  <span class="ruby-identifier">entity_filter</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">illegal</span>=<span class="ruby-constant">NEEDS_A_SECOND_CHECK</span> )

  <span class="ruby-ivar">@raw</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@parent</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">parent</span>
    <span class="ruby-keyword">super</span>( <span class="ruby-identifier">parent</span> )
    <span class="ruby-ivar">@raw</span> = <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">raw</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@raw</span> = <span class="ruby-identifier">raw</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">raw</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-ivar">@entity_filter</span> = <span class="ruby-identifier">entity_filter</span>
  <span class="ruby-ivar">@normalized</span> = <span class="ruby-ivar">@unnormalized</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">String</span>
    <span class="ruby-ivar">@string</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-ivar">@string</span>.<span class="ruby-identifier">squeeze!</span>(<span class="ruby-string">&quot; \n\t&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">respect_whitespace</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Text</span>
    <span class="ruby-ivar">@string</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-ivar">@raw</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">raw</span>
  <span class="ruby-keyword">elsif</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Illegal argument of type #{arg.type} for Text constructor (#{arg})&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@string</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span> )

  <span class="ruby-constant">Text</span>.<span class="ruby-identifier">check</span>(<span class="ruby-ivar">@string</span>, <span class="ruby-identifier">illegal</span>, <span class="ruby-identifier">doctype</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->
      
        <div id="normalize-method" class="method-detail ">
          <a name="method-c-normalize"></a>

          
          <div class="method-heading">
            <span class="method-name">normalize</span><span
              class="method-args">( input, doctype=nil, entity_filter=nil )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Escapes all possible entities</p>
            

            
            <div class="method-source-code" id="normalize-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 361</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-identifier">normalize</span>( <span class="ruby-identifier">input</span>, <span class="ruby-identifier">doctype</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">entity_filter</span>=<span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">copy</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-comment"># Doing it like this rather than in a loop improves the speed</span>
  <span class="ruby-comment">#copy = copy.gsub( EREFERENCE, '&amp;amp;' )</span>
  <span class="ruby-identifier">copy</span> = <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub</span>( <span class="ruby-string">&quot;&amp;&quot;</span>, <span class="ruby-string">&quot;&amp;amp;&quot;</span> )
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">doctype</span>
    <span class="ruby-comment"># Replace all ampersands that aren't part of an entity</span>
    <span class="ruby-identifier">doctype</span>.<span class="ruby-identifier">entities</span>.<span class="ruby-identifier">each_value</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">entity</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">copy</span> = <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub</span>( <span class="ruby-identifier">entity</span>.<span class="ruby-identifier">value</span>,
        <span class="ruby-node">&quot;&amp;#{entity.name};&quot;</span> ) <span class="ruby-keyword">if</span> <span class="ruby-identifier">entity</span>.<span class="ruby-identifier">value</span> <span class="ruby-keyword">and</span>
          <span class="ruby-keyword">not</span>( <span class="ruby-identifier">entity_filter</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">entity_filter</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">entity</span>) )
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># Replace all ampersands that aren't part of an entity</span>
    <span class="ruby-constant">DocType</span><span class="ruby-operator">::</span><span class="ruby-constant">DEFAULT_ENTITIES</span>.<span class="ruby-identifier">each_value</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">entity</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">copy</span> = <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">entity</span>.<span class="ruby-identifier">value</span>, <span class="ruby-node">&quot;&amp;#{entity.name};&quot;</span> )
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">copy</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- normalize-source -->
            
          </div>

          

          
        </div><!-- normalize-method -->
      
        <div id="read_with_substitution-method" class="method-detail ">
          <a name="method-c-read_with_substitution"></a>

          
          <div class="method-heading">
            <span class="method-name">read_with_substitution</span><span
              class="method-args">( input, illegal=nil )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Reads text, substituting entities</p>
            

            
            <div class="method-source-code" id="read_with_substitution-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 335</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-identifier">read_with_substitution</span>( <span class="ruby-identifier">input</span>, <span class="ruby-identifier">illegal</span>=<span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">copy</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">clone</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">copy</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">illegal</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ParseException</span>.<span class="ruby-identifier">new</span>( <span class="ruby-node">&quot;malformed text: Illegal character #$&amp; in \&quot;#{copy}\&quot;&quot;</span> )
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">illegal</span>

  <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span> )
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">?&amp;</span>
    <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SETUTITSBUS</span>[<span class="ruby-value">0</span>], <span class="ruby-constant">SLAICEPS</span>[<span class="ruby-value">0</span>] )
    <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SETUTITSBUS</span>[<span class="ruby-value">1</span>], <span class="ruby-constant">SLAICEPS</span>[<span class="ruby-value">1</span>] )
    <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SETUTITSBUS</span>[<span class="ruby-value">2</span>], <span class="ruby-constant">SLAICEPS</span>[<span class="ruby-value">2</span>] )
    <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SETUTITSBUS</span>[<span class="ruby-value">3</span>], <span class="ruby-constant">SLAICEPS</span>[<span class="ruby-value">3</span>] )
    <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SETUTITSBUS</span>[<span class="ruby-value">4</span>], <span class="ruby-constant">SLAICEPS</span>[<span class="ruby-value">4</span>] )
    <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-node">/&amp;#0*((?:\d+)|(?:x[a-f0-9]+));/</span> ) {
      <span class="ruby-identifier">m</span>=<span class="ruby-node">$1</span>
      <span class="ruby-comment">#m='0' if m==''</span>
      <span class="ruby-identifier">m</span> = <span class="ruby-node">&quot;0#{m}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">m</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?x</span>
      [<span class="ruby-constant">Integer</span>(<span class="ruby-identifier">m</span>)].<span class="ruby-identifier">pack</span>(<span class="ruby-string">'U*'</span>)
    }
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">copy</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- read_with_substitution-source -->
            
          </div>

          

          
        </div><!-- read_with_substitution-method -->
      
        <div id="unnormalize-method" class="method-detail ">
          <a name="method-c-unnormalize"></a>

          
          <div class="method-heading">
            <span class="method-name">unnormalize</span><span
              class="method-args">( string, doctype=nil, filter=nil, illegal=nil )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Unescapes all possible entities</p>
            

            
            <div class="method-source-code" id="unnormalize-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 383</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-identifier">unnormalize</span>( <span class="ruby-identifier">string</span>, <span class="ruby-identifier">doctype</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">filter</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">illegal</span>=<span class="ruby-keyword">nil</span> )
  <span class="ruby-identifier">sum</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">string</span>.<span class="ruby-identifier">gsub</span>( <span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span> ).<span class="ruby-identifier">gsub</span>( <span class="ruby-constant">REFERENCE</span> ) {
    <span class="ruby-identifier">s</span> = <span class="ruby-constant">Text</span>.<span class="ruby-identifier">expand</span>(<span class="ruby-node">$&amp;</span>, <span class="ruby-identifier">doctype</span>, <span class="ruby-identifier">filter</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">sum</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">bytesize</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">REXML</span>.<span class="ruby-identifier">entity_expansion_text_limit</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;entity expansion has grown too large&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">sum</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">bytesize</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">s</span>
  }
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- unnormalize-source -->
            
          </div>

          

          
        </div><!-- unnormalize-method -->
      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="3C-3C-method" class="method-detail ">
          <a name="method-i-3C-3C"></a>

          
          <div class="method-heading">
            <span class="method-name">&lt;&lt;</span><span
              class="method-args">( to_append )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Appends text to this text node.  The text is appended in the
<code>raw</code> mode of this text node.</p>
            

            
            <div class="method-source-code" id="3C-3C-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 189</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>( <span class="ruby-identifier">to_append</span> )
  <span class="ruby-ivar">@string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">to_append</span>.<span class="ruby-identifier">gsub</span>( <span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span> )
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- 3C-3C-source -->
            
          </div>

          

          
        </div><!-- 3C-3C-method -->
      
        <div id="3C-3D-3E-method" class="method-detail ">
          <a name="method-i-3C-3D-3E"></a>

          
          <div class="method-heading">
            <span class="method-name">&lt;=&gt;</span><span
              class="method-args">( other )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p><code>other</code> a String or a <a href="Text.html">Text</a>
<code>returns</code> the result of (to_s &lt;=&gt; arg.to_s)</p>
            

            
            <div class="method-source-code" id="3C-3D-3E-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;=&gt;</span>( <span class="ruby-identifier">other</span> )
  <span class="ruby-identifier">to_s</span>() <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- 3C-3D-3E-source -->
            
          </div>

          

          
        </div><!-- 3C-3D-3E-method -->
      
        <div id="clone-method" class="method-detail ">
          <a name="method-i-clone"></a>

          
          <div class="method-heading">
            <span class="method-name">clone</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="clone-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clone</span>
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Text</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- clone-source -->
            
          </div>

          

          
        </div><!-- clone-method -->
      
        <div id="doctype-method" class="method-detail ">
          <a name="method-i-doctype"></a>

          
          <div class="method-heading">
            <span class="method-name">doctype</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="doctype-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">doctype</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parent</span>
    <span class="ruby-identifier">doc</span> = <span class="ruby-ivar">@parent</span>.<span class="ruby-identifier">document</span>
    <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">doctype</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">doc</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- doctype-source -->
            
          </div>

          

          
        </div><!-- doctype-method -->
      
        <div id="empty-3F-method" class="method-detail ">
          <a name="method-i-empty-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">empty?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="empty-3F-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 177</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
  <span class="ruby-ivar">@string</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- empty-3F-source -->
            
          </div>

          

          
        </div><!-- empty-3F-method -->
      
        <div id="indent_text-method" class="method-detail ">
          <a name="method-i-indent_text"></a>

          
          <div class="method-heading">
            <span class="method-name">indent_text</span><span
              class="method-args">(string, level=1, style="\t", indentfirstline=true)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="indent_text-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">indent_text</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">level</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">style</span>=<span class="ruby-string">&quot;\t&quot;</span>, <span class="ruby-identifier">indentfirstline</span>=<span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">string</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">new_string</span> = <span class="ruby-string">''</span>
  <span class="ruby-identifier">string</span>.<span class="ruby-identifier">each_line</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">indent_string</span> = <span class="ruby-identifier">style</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">level</span>
    <span class="ruby-identifier">new_line</span> = (<span class="ruby-identifier">indent_string</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>).<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/[\s]+$/</span>,<span class="ruby-string">''</span>)
    <span class="ruby-identifier">new_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_line</span>
  }
  <span class="ruby-identifier">new_string</span>.<span class="ruby-identifier">strip!</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">indentfirstline</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">new_string</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- indent_text-source -->
            
          </div>

          

          
        </div><!-- indent_text-method -->
      
        <div id="inspect-method" class="method-detail ">
          <a name="method-i-inspect"></a>

          
          <div class="method-heading">
            <span class="method-name">inspect</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="inspect-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 228</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>
  <span class="ruby-ivar">@string</span>.<span class="ruby-identifier">inspect</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- inspect-source -->
            
          </div>

          

          
        </div><!-- inspect-method -->
      
        <div id="node_type-method" class="method-detail ">
          <a name="method-i-node_type"></a>

          
          <div class="method-heading">
            <span class="method-name">node_type</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="node_type-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">node_type</span>
  <span class="ruby-value">:text</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- node_type-source -->
            
          </div>

          

          
        </div><!-- node_type-method -->
      
        <div id="parent-3D-method" class="method-detail ">
          <a name="method-i-parent-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">parent=</span><span
              class="method-args">(parent)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="parent-3D-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent=</span> <span class="ruby-identifier">parent</span>
  <span class="ruby-keyword">super</span>(<span class="ruby-identifier">parent</span>)
  <span class="ruby-constant">Text</span>.<span class="ruby-identifier">check</span>(<span class="ruby-ivar">@string</span>, <span class="ruby-constant">NEEDS_A_SECOND_CHECK</span>, <span class="ruby-identifier">doctype</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@parent</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- parent-3D-source -->
            
          </div>

          

          
        </div><!-- parent-3D-method -->
      
        <div id="to_s-method" class="method-detail ">
          <a name="method-i-to_s"></a>

          
          <div class="method-heading">
            <span class="method-name">to_s</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns the string value of this text node.  This string is always escaped,
meaning that it is a valid XML text node string, and all entities that can
be escaped, have been inserted.  This method respects the entity filter set
in the constructor.</p>

<pre># Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;, and that the
# entity &quot;r&quot; is defined to be &quot;russell&quot;
t = Text.new( &quot;&lt; &amp; sean russell&quot;, false, nil, false, ['s'] )
t.to_s   #-&gt; &quot;&amp;lt; &amp;amp; &amp;s; russell&quot;
t = Text.new( &quot;&lt; &amp; &amp;s; russell&quot;, false, nil, false )
t.to_s   #-&gt; &quot;&amp;lt; &amp;amp; &amp;s; russell&quot;
u = Text.new( &quot;sean russell&quot;, false, nil, true )
u.to_s   #-&gt; &quot;sean russell&quot;</pre>
            

            
            <div class="method-source-code" id="to_s-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 221</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@string</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@raw</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@normalized</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@normalized</span>

  <span class="ruby-ivar">@normalized</span> = <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-identifier">normalize</span>( <span class="ruby-ivar">@string</span>, <span class="ruby-identifier">doctype</span>, <span class="ruby-ivar">@entity_filter</span> )
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- to_s-source -->
            
          </div>

          

          
        </div><!-- to_s-method -->
      
        <div id="value-method" class="method-detail ">
          <a name="method-i-value"></a>

          
          <div class="method-heading">
            <span class="method-name">value</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Returns the string value of this text.  This is the text without entities,
as it might be used programmatically, or printed to the console.  This
ignores the ‘raw’ attribute setting, and any entity_filter.</p>

<pre># Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;, and that the
# entity &quot;r&quot; is defined to be &quot;russell&quot;
t = Text.new( &quot;&lt; &amp; sean russell&quot;, false, nil, false, ['s'] )
t.value   #-&gt; &quot;&lt; &amp; sean russell&quot;
t = Text.new( &quot;&lt; &amp; &amp;s; russell&quot;, false, nil, false )
t.value   #-&gt; &quot;&lt; &amp; sean russell&quot;
u = Text.new( &quot;sean russell&quot;, false, nil, true )
u.value   #-&gt; &quot;sean russell&quot;</pre>
            

            
            <div class="method-source-code" id="value-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 245</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@unnormalized</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@unnormalized</span>
  <span class="ruby-ivar">@unnormalized</span> = <span class="ruby-constant">Text</span><span class="ruby-operator">::</span><span class="ruby-identifier">unnormalize</span>( <span class="ruby-ivar">@string</span>, <span class="ruby-identifier">doctype</span> )
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- value-source -->
            
          </div>

          

          
        </div><!-- value-method -->
      
        <div id="value-3D-method" class="method-detail ">
          <a name="method-i-value-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">value=</span><span
              class="method-args">( val )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Sets the contents of this text node.  This expects the text to be
unnormalized.  It returns self.</p>

<pre>e = Element.new( &quot;a&quot; )
e.add_text( &quot;foo&quot; )   # &lt;a&gt;foo&lt;/a&gt;
e[0].value = &quot;bar&quot;    # &lt;a&gt;bar&lt;/a&gt;
e[0].value = &quot;&lt;a&gt;&quot;    # &lt;a&gt;&amp;lt;a&amp;gt;&lt;/a&gt;</pre>
            

            
            <div class="method-source-code" id="value-3D-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 257</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">value=</span>( <span class="ruby-identifier">val</span> )
  <span class="ruby-ivar">@string</span> = <span class="ruby-identifier">val</span>.<span class="ruby-identifier">gsub</span>( <span class="ruby-regexp">/\r\n?/</span>, <span class="ruby-string">&quot;\n&quot;</span> )
  <span class="ruby-ivar">@unnormalized</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@normalized</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@raw</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- value-3D-source -->
            
          </div>

          

          
        </div><!-- value-3D-method -->
      
        <div id="wrap-method" class="method-detail ">
          <a name="method-i-wrap"></a>

          
          <div class="method-heading">
            <span class="method-name">wrap</span><span
              class="method-args">(string, width, addnewline=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            
            

            
            <div class="method-source-code" id="wrap-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">width</span>, <span class="ruby-identifier">addnewline</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-comment"># Recursively wrap string at width.</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">string</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">string</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">width</span>
  <span class="ruby-identifier">place</span> = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">rindex</span>(<span class="ruby-string">' '</span>, <span class="ruby-identifier">width</span>) <span class="ruby-comment"># Position in string with last ' ' before cutoff</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">addnewline</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">return</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">place</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">string</span>[<span class="ruby-identifier">place</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>], <span class="ruby-identifier">width</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>,<span class="ruby-identifier">place</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">string</span>[<span class="ruby-identifier">place</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>], <span class="ruby-identifier">width</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- wrap-source -->
            
          </div>

          

          
        </div><!-- wrap-method -->
      
        <div id="write-method" class="method-detail ">
          <a name="method-i-write"></a>

          
          <div class="method-heading">
            <span class="method-name">write</span><span
              class="method-args">( writer, indent=-1, transitive=false, ie_hack=false )</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <h2 id="method-i-write-label-DEPRECATED">DEPRECATED<span><a href="#method-i-write-label-DEPRECATED">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>See REXML::Formatters</p>
            

            
            <div class="method-source-code" id="write-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write</span>( <span class="ruby-identifier">writer</span>, <span class="ruby-identifier">indent</span>=<span class="ruby-value">-1</span>, <span class="ruby-identifier">transitive</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">ie_hack</span>=<span class="ruby-keyword">false</span> )
  <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;#{self.class.name}.write is deprecated.  See REXML::Formatters&quot;</span>)
  <span class="ruby-identifier">formatter</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">-1</span>
      <span class="ruby-constant">REXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Formatters</span><span class="ruby-operator">::</span><span class="ruby-constant">Pretty</span>.<span class="ruby-identifier">new</span>( <span class="ruby-identifier">indent</span> )
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">REXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Formatters</span><span class="ruby-operator">::</span><span class="ruby-constant">Default</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">formatter</span>.<span class="ruby-identifier">write</span>( <span class="ruby-keyword">self</span>, <span class="ruby-identifier">writer</span> )
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- write-source -->
            
          </div>

          

          
        </div><!-- write-method -->
      
        <div id="write_with_substitution-method" class="method-detail ">
          <a name="method-i-write_with_substitution"></a>

          
          <div class="method-heading">
            <span class="method-name">write_with_substitution</span><span
              class="method-args">(out, input)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>Writes out text, substituting special characters beforehand.
<code>out</code> A String, IO, or any other object supporting &lt;&lt;(
String ) <code>input</code> the text to substitute and the write out</p>

<pre class="ruby"><span class="ruby-identifier">z</span>=<span class="ruby-identifier">utf8</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&quot;U*&quot;</span>)
<span class="ruby-identifier">ascOut</span>=<span class="ruby-string">&quot;&quot;</span>
<span class="ruby-identifier">z</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;</span>  <span class="ruby-value">0x100</span>
    <span class="ruby-identifier">ascOut</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">r</span>.<span class="ruby-identifier">chr</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">ascOut</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">sprintf</span>(<span class="ruby-node">&quot;&amp;#x%x;&quot;</span>, <span class="ruby-identifier">r</span>))
  <span class="ruby-keyword">end</span>
}
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">ascOut</span>
</pre>
            

            
            <div class="method-source-code" id="write_with_substitution-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 322</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">write_with_substitution</span> <span class="ruby-identifier">out</span>, <span class="ruby-identifier">input</span>
  <span class="ruby-identifier">copy</span> = <span class="ruby-identifier">input</span>.<span class="ruby-identifier">clone</span>
  <span class="ruby-comment"># Doing it like this rather than in a loop improves the speed</span>
  <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SPECIALS</span>[<span class="ruby-value">0</span>], <span class="ruby-constant">SUBSTITUTES</span>[<span class="ruby-value">0</span>] )
  <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SPECIALS</span>[<span class="ruby-value">1</span>], <span class="ruby-constant">SUBSTITUTES</span>[<span class="ruby-value">1</span>] )
  <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SPECIALS</span>[<span class="ruby-value">2</span>], <span class="ruby-constant">SUBSTITUTES</span>[<span class="ruby-value">2</span>] )
  <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SPECIALS</span>[<span class="ruby-value">3</span>], <span class="ruby-constant">SUBSTITUTES</span>[<span class="ruby-value">3</span>] )
  <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SPECIALS</span>[<span class="ruby-value">4</span>], <span class="ruby-constant">SUBSTITUTES</span>[<span class="ruby-value">4</span>] )
  <span class="ruby-identifier">copy</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-constant">SPECIALS</span>[<span class="ruby-value">5</span>], <span class="ruby-constant">SUBSTITUTES</span>[<span class="ruby-value">5</span>] )
  <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">copy</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- write_with_substitution-source -->
            
          </div>

          

          
        </div><!-- write_with_substitution-method -->
      
        <div id="xpath-method" class="method-detail ">
          <a name="method-i-xpath"></a>

          
          <div class="method-heading">
            <span class="method-name">xpath</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          
          <div>
  
            
            <p>FIXME This probably won’t work properly</p>
            

            
            <div class="method-source-code" id="xpath-source">
              <pre> <!-- method.markup_code 290 -->
               <span class="ruby-comment"># File rexml/text.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">xpath</span>
  <span class="ruby-identifier">path</span> = <span class="ruby-ivar">@parent</span>.<span class="ruby-identifier">xpath</span>
  <span class="ruby-identifier">path</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;/text()&quot;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">path</span>
<span class="ruby-keyword">end</span>
            </pre> 
            </div><!-- xpath-source -->
            
          </div>

          

          
        </div><!-- xpath-method -->
      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  
  <div id='tx_Text_versioned' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_Text_versioned").load("/associated/1.9.3/Text.html");</script> <div id='tx_Text' class='associated_wrapper'></div><script type='text/javascript'>$("#tx_Text").load("/associated/Text.html");</script> 
      
  </div><!-- documentation -->
  <div id='dynamic'>
  </div>
      
<div class='grids wrapper' id="footer">
  <p><small>This page was generated for Ruby 1.9.3</small></p> 
  
   <p><a href="http://www.ruby-doc.org">Ruby-doc.org</a> is a service of <a href="http://www.jamesbritt.com">James Britt</a> and <a href="http://www.neurogami.com">Neurogami</a>, a <a href="http://www.neurogami.com">software development company in Scottsdale, AZ</a>.</p>
 
    <p><small>Generated with Ruby-doc Rdoc Generator 0.26.0</small>.</p>
  </div>
</div>
  
 <script type='text/javascript'>
$(document).ready(function() {
      $.ajaxSetup({ cache: false });
      $("#vulns-alert").load("/associated/vulns.html");
    });

    </script>


 
    <script type='text/javascript'>

  function loadPlus(plusdocs){
    var img_h = $("img.carbonad-image").css('height');
    //if(img_h != undefined) { //---
      $(plusdocs).find("div[class='associated_wrapper']").each (function() {
          $("#" + this.id).append($(plusdocs).find("#" + this.id ));
          });
    //} // ---
  } // end loadPlusdocs


$(document).ready(function() {
    $.ajaxSetup({ cache: false });
      $.get('/associated/1.9.3/plus_Text.html', 
      function(plusdocs) {
      setTimeout(function() {
        loadPlus(plusdocs);
        }, 2000);
      }
      );
    });
</script>
		
</body>
</html>


